var select_button,parent_src_vars;select_button='<a href="#" class="slt-cf-fs-insert button-secondary">'+slt_cf_file_select.text_select_file+"</a>";jQuery(document).ready(function(b){if(b(".slt-cf-fs-button").length){b(".slt-cf-fs-button").click(function(){var c;b("html").addClass("File");c="media-upload.php?slt_cf_fs_field="+b(this).siblings("input.slt-cf-fs-value").attr("id")+"&type=file";if(b(this).siblings("input.slt-cf-fs-attach-to-post").attr("value")=="1"&&b(this).parents("form").find("input[name=post_ID]").length){c+="&post_id="+b(this).parents("form").find("input[name=post_ID]").attr("value")}c+="&TB_iframe=true";tb_show("",c);return false});b(".slt-cf-fs-button:first").parents("form").submit(function(){b(".slt-cf-fs-remove:checked").each(function(){b(this).siblings("input.slt-cf-fs-value").val("")})})}if(slt_fs_media_overlay()){var a;a=b("ul#sidemenu a.current").parent("li").attr("id");b("ul#sidemenu li#tab-type_url").remove();b("p.ml-submit").remove();switch(a){case"tab-type":slt_fs_media_item_interface();break;case"tab-gallery":case"tab-library":b("#sort-buttons > span,th.order-head,#media-items .media-item div.menu_order,#media-items .media-item a.toggle, #gallery-settings").remove();b("#media-items .media-item").each(function(){b(this).prepend(select_button)});b("a.slt-cf-fs-insert").css({display:"block","float":"right",margin:"7px 20px 0 0"});break}b("a.slt-cf-fs-insert").live("click",function(){var c;if(b(this).parent().attr("class")=="savesend"){c=b(this).siblings(".del-attachment").attr("id");c=c.match(/del_attachment_([0-9]+)/);c=c[1]}else{c=b(this).parent().attr("id");c=c.match(/media\-item\-([0-9]+)/);c=c[1]}parent.slt_cf_fs_select_item(c,parent_src_vars.slt_cf_fs_field);return false});b(document).ajaxComplete(function(){slt_fs_media_item_interface()})}});function slt_fs_media_item_interface(){jQuery(function(a){a("table.describe tbody tr:not(.submit), a.wp-post-thumbnail").remove();if(a("table.describe tr.submit td.savesend input").length){a("table.describe tr.submit td.savesend input").replaceWith(select_button)}else{a("table.describe tr.submit td.savesend").prepend(select_button)}a('table.describe input[value="Edit Image"]').parent("p").remove()})}function slt_fs_media_overlay(){var a;a=false;if(jQuery("body").attr("id")=="media-upload"){parent.jQuery("iframe").each(function(b,c){if(c.contentWindow===window&&jQuery(c).attr("id")=="TB_iframeContent"){parent_src_vars=slt_fs_get_url_vars(parent.document.getElementById("TB_iframeContent").src);if("slt_cf_fs_field" in parent_src_vars){a=true}}})}return a}function slt_fs_get_url_vars(a){var c,b;c={};b=a.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(d,e,f){c[e]=f});return c}function slt_fs_new_upload_button(b){var a;if(slt_fs_media_overlay()){jQuery(function(c){a=c("#slt-cf-new-upload-button-"+b).parents("table");c(a).find("tbody tr:not(.submit), a.wp-post-thumbnail").remove();c(a).find('input[type=button][value="Edit Image"]').remove();if(c(a).find("tr.submit td.savesend input").length){c(a).find("tr.submit td.savesend input").replaceWith(select_button)}else{c(a).find("tr.submit td.savesend").prepend(select_button)}})}}function slt_cf_fs_select_item(a,b){var d,e,c;jQuery(function(f){d=f("#"+b);e=f("#"+b+"_preview");c=f("#"+b+"_preview-size").val();e.html("").load(slt_cf_file_select.ajaxurl,{id:a,size:c,action:"slt_cf_fs_get_file"});d.val(a);tb_remove();f("html").removeClass("File")})};